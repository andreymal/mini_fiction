{% extends base %}

{% from 'macro.html' import atom_feed with context %}
{% from 'macro.html' import paginator with context %}

{% block fulltitle %}
    {%- if full_title -%}
        {{- full_title -}}
    {%- else -%}
        {{- super() -}}
    {%- endif -%}
{% endblock %}

{% block extrahead %}
    {{- super() }}
    {% if site_description -%}
        <meta name="description" content="{{ site_description }}" />
    {%- endif -%}
{% endblock %}

{% block feeds %}
    {{ atom_feed(url_for('feeds.stories'), _('New stories'), False) }}
{% endblock %}

{% block content %}
<div class="row welcome-box">
  <div class="span12 genra">
    <ul class="mininav">
        <li class="mininav-item"><a href="{{ url_for('object_lists.top') }}">{{ pgettext('best_stories', 'Best') }}</a></li>
        <li class="mininav-item"><a href="{{ url_for('tags.index') }}">{{ _('Tags') }}</a></li>
        {% if current_user.is_staff -%}
            <li class="mininav-item"><a href="{{ url_for('editlog.index', all='1', staff='1') }}">{{ _('Moderation log') }}</a></li>
        {% elif current_user.is_authenticated -%}
            <li class="mininav-item"><a href="{{ url_for('editlog.index') }}">{{ _('Edit log') }}</a></li>
        {% endif -%}
    </ul>
  </div>
</div>

<div class="row">
    <div class="span8 top-list">
        <h2>{{ _('New stories') }}</h2>
        {% include "includes/stories.html" %}
        {% if stories %}{{ paginator(page_obj) }}{% endif %}
    </div>

    <div class="span4 sidelist top-list">
        {% for sidebar_block_html in sidebar_blocks %}
            {{- sidebar_block_html|safe -}}
        {% endfor -%}
    </div>
</div>
{% endblock %}
